{"version":3,"sources":["index.js"],"names":["lists","_id","text","done","count","length","refresh","console","log","html","i","list","document","querySelector","innerHTML","add","onclick","addItem","dones","querySelectorAll","toggleDone","Number","parentNode","id","replace","deletes","deleteItem","texts","onchange","changeText","onkeyup","resizeTextarea","onkeydown","onfocusout","push","focus","filter","map","value","fake","textarea","style","height","width","clientWidth","scrollHeight","textareas","window","addEventListener"],"mappings":"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","file":"todo_parcel.9867dbea.js","sourceRoot":"..","sourcesContent":["//초기 lists\r\nlet lists = [\r\n  {\r\n    _id: 1,\r\n    text: 'first item',\r\n    done: false,\r\n  },\r\n  {\r\n    _id: 2,\r\n    text: 'second item',\r\n    done: false,\r\n  },\r\n]\r\n\r\n//리스트 개수\r\nlet count = lists.length\r\n\r\n//변경시 리스트를 다시 렌더링하는 함수\r\nfunction refresh() {\r\n  console.log('refresh')\r\n  //리스트 그리기\r\n  let html = ''\r\n  for (let i of lists) {\r\n    html += `<div id=\"item_${i._id}\" class=\"item ${i.done}\">\r\n    <div class=\"button done hover ${i.done}\"></div>\r\n      <div class=\"text\"><textarea class=\"${i.done}\">${i.text}</textarea></div>\r\n      <div class=\"button delete hover\">-</div>\r\n    </div>`\r\n  }\r\n  const list = document.querySelector('.lists')\r\n  if (list) list.innerHTML = html\r\n\r\n  //add 이벤트 추가\r\n  const add = document.querySelector('.add')\r\n  if (add)\r\n    add.onclick = function () {\r\n      addItem()\r\n    }\r\n\r\n  //done 이벤트 추가\r\n  const dones = document.querySelectorAll('.done')\r\n  for (let i of dones) {\r\n    i.onclick = function () {\r\n      toggleDone(Number(i.parentNode.id.replace('item_', '')))\r\n    }\r\n  }\r\n\r\n  //delete 이벤트 추가\r\n  const deletes = document.querySelectorAll('.delete')\r\n  for (let i of deletes) {\r\n    i.onclick = function () {\r\n      deleteItem(Number(i.parentNode.id.replace('item_', '')))\r\n    }\r\n  }\r\n\r\n  //textarea onchange 이벤트 시 lists 업데이트\r\n  const texts = document.querySelectorAll('textarea')\r\n  for (let i of texts) {\r\n    i.onchange = function () {\r\n      changeText(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n    i.onkeyup = function() {\r\n      resizeTextarea(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n    i.onkeydown = function() {\r\n      resizeTextarea(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n    i.onfocusout = function() {\r\n      resizeTextarea(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n  }\r\n  resizeTextarea()\r\n}\r\n// 변경시 리스트를 다시 렌더링하는 함수 //\r\n\r\n/* 이벤트 함수들 생성 */\r\n//add버튼 클릭하면 item 추가하고 focus\r\nfunction addItem() {\r\n  count++\r\n  lists.push({\r\n    _id: count,\r\n    text: '',\r\n    done: false,\r\n  })\r\n  refresh()\r\n  const texts = document.querySelectorAll('textarea')\r\n  texts[texts.length - 1].focus()\r\n}\r\n\r\n//삭제 클릭하면 item 삭제하고 refresh()\r\nfunction deleteItem(_id) {\r\n  lists = lists.filter((i) => i._id !== _id)\r\n  refresh()\r\n}\r\n\r\n//done 클릭하면 item의 스타일 변경하고 refresh()\r\nfunction toggleDone(_id) {\r\n  lists = lists.map((i) => (i._id === _id ? { ...i, done: !i.done } : i))\r\n  refresh()\r\n}\r\n\r\n//textarea 변경되면 lists 변경\r\nfunction changeText(_id) {\r\n  const text = document.querySelector(`#item_${_id} textarea`).value\r\n  lists = lists.map((i) => (i._id === _id ? { ...i, text: text } : i))\r\n}\r\n\r\n//textarea를 찾아서 크기를 글자 높이에 맞게 변경하기\r\nfunction resizeTextarea(_id) {\r\n  const fake = document.querySelector('#fakeTextarea')\r\n  if (_id && fake) {\r\n    const textarea = document.querySelector(`#item_${_id} textarea`)\r\n    if (textarea) {\r\n      fake.style.height = '0px'\r\n      fake.style.width = textarea.clientWidth + 'px'\r\n      fake.value = textarea.value\r\n      textarea.style.height = fake.scrollHeight + 'px'\r\n      fake.value = ''\r\n      fake.style.height = '0px'\r\n    }\r\n    return\r\n  }\r\n\r\n  const textareas = document.querySelectorAll('textarea')\r\n  if (fake) {\r\n    for (let i = 0; i < textareas.length-1; i++) {\r\n      fake.style.height = '0px'\r\n      fake.style.width = textareas[i].clientWidth + 'px'\r\n      fake.value = textareas[i].value\r\n      textareas[i].style.height = 8 + fake.scrollHeight + 'px'\r\n    }\r\n    fake.value = ''\r\n    fake.style.height = '0px'\r\n  }\r\n}\r\n\r\n//로드 완료 후 리프레시\r\nwindow.addEventListener('load', function () {\r\n  refresh()\r\n})\r\n"]}