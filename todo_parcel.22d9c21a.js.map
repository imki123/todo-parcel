{"version":3,"sources":["index.js"],"names":["lists","_id","text","done","count","length","refresh","console","log","html","i","list","document","querySelector","innerHTML","querySelectorAll","src","add","onclick","addItem","dones","toggleDone","Number","parentNode","id","replace","removes","removeItem","texts","onchange","changeText","onkeyup","resizeTextarea","onkeydown","onfocusout","push","focus","filter","map","value","fake","textarea","style","height","width","clientWidth","scrollHeight","textareas","window","addEventListener"],"mappings":"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","file":"todo_parcel.22d9c21a.js","sourceRoot":"..","sourcesContent":["//초기 lists\r\nlet lists = [\r\n  {\r\n    _id: 1,\r\n    text: 'first item',\r\n    done: false,\r\n  },\r\n  {\r\n    _id: 2,\r\n    text: 'second item',\r\n    done: false,\r\n  },\r\n]\r\n\r\n//리스트 개수\r\nlet count = lists.length\r\n// refresh. 변경시 리스트를 다시 렌더링하는 함수\r\nfunction refresh() {\r\n  console.log('refresh')\r\n  //리스트 그리기\r\n  let html = ''\r\n  for (let i of lists) {\r\n    html += `<div id=\"item_${i._id}\" class=\"item ${i.done}\">\r\n    \r\n    <div class=\"button done hover ${i.done}\">\r\n      <img class=\"check\"/>\r\n    </div>\r\n      <div class=\"text\"><textarea class=\"${i.done}\">${i.text}</textarea></div>\r\n      <div class=\"button remove hover\">\r\n        <img class=\"remove\"/>\r\n      </div>\r\n    </div>`\r\n  }\r\n  const list = document.querySelector('.lists')\r\n  if (list) list.innerHTML = html\r\n\r\n  //img src 동적 설정. parcel 때문에.\r\n  for(let i of document.querySelectorAll('.check')){\r\n    i.src = document.querySelector('#check').src\r\n  }\r\n  for(let i of document.querySelectorAll('.remove')){\r\n    i.src = document.querySelector('#remove').src\r\n  }\r\n\r\n\r\n  //add 이벤트 추가\r\n  const add = document.querySelector('.add')\r\n  if (add)\r\n    add.onclick = function () {\r\n      addItem()\r\n    }\r\n\r\n  //done 이벤트 추가\r\n  const dones = document.querySelectorAll('.done')\r\n  for (let i of dones) {\r\n    i.onclick = function () {\r\n      toggleDone(Number(i.parentNode.id.replace('item_', '')))\r\n    }\r\n  }\r\n\r\n  //remove 이벤트 추가\r\n  const removes = document.querySelectorAll('.remove')\r\n  for (let i of removes) {\r\n    i.onclick = function () {\r\n      removeItem(Number(i.parentNode.id.replace('item_', '')))\r\n    }\r\n  }\r\n\r\n  //textarea onchange 이벤트 시 lists 업데이트\r\n  const texts = document.querySelectorAll('textarea')\r\n  for (let i of texts) {\r\n    i.onchange = function () {\r\n      changeText(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n    i.onkeyup = function() {\r\n      resizeTextarea(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n    i.onkeydown = function() {\r\n      resizeTextarea(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n    i.onfocusout = function() {\r\n      resizeTextarea(Number(i.parentNode.parentNode.id.replace('item_', '')))\r\n    }\r\n  }\r\n  resizeTextarea()\r\n}\r\n// refresh. 변경시 리스트를 다시 렌더링하는 함수 //\r\n\r\n/* 이벤트 함수들 생성 */\r\n//add버튼 클릭하면 item 추가하고 focus\r\nfunction addItem() {\r\n  count++\r\n  lists.push({\r\n    _id: count,\r\n    text: '',\r\n    done: false,\r\n  })\r\n  refresh()\r\n  const texts = document.querySelectorAll('textarea')\r\n  texts[texts.length - 2].focus()\r\n}\r\n\r\n//삭제 클릭하면 item 삭제하고 refresh()\r\nfunction removeItem(_id) {\r\n  lists = lists.filter((i) => i._id !== _id)\r\n  refresh()\r\n}\r\n\r\n//done 클릭하면 item의 스타일 변경하고 refresh()\r\nfunction toggleDone(_id) {\r\n  lists = lists.map((i) => (i._id === _id ? { ...i, done: !i.done } : i))\r\n  refresh()\r\n}\r\n\r\n//textarea 변경되면 lists 변경\r\nfunction changeText(_id) {\r\n  const text = document.querySelector(`#item_${_id} textarea`).value\r\n  lists = lists.map((i) => (i._id === _id ? { ...i, text: text } : i))\r\n}\r\n\r\n//textarea를 찾아서 크기를 글자 높이에 맞게 변경하기\r\nfunction resizeTextarea(_id) {\r\n  const fake = document.querySelector('#fakeTextarea')\r\n  if (_id && fake) {\r\n    const textarea = document.querySelector(`#item_${_id} textarea`)\r\n    if (textarea) {\r\n      fake.style.height = '0px'\r\n      fake.style.width = textarea.clientWidth + 'px'\r\n      fake.value = textarea.value\r\n      textarea.style.height = fake.scrollHeight + 'px'\r\n      fake.value = ''\r\n      fake.style.height = '0px'\r\n    }\r\n    return\r\n  }\r\n\r\n  const textareas = document.querySelectorAll('textarea')\r\n  if (fake) {\r\n    for (let i = 0; i < textareas.length-1; i++) {\r\n      fake.style.height = '0px'\r\n      fake.style.width = textareas[i].clientWidth + 'px'\r\n      fake.value = textareas[i].value\r\n      textareas[i].style.height = 8 + fake.scrollHeight + 'px'\r\n    }\r\n    fake.value = ''\r\n    fake.style.height = '0px'\r\n  }\r\n}\r\n\r\n//로드 완료 후 리프레시\r\nwindow.addEventListener('load', function () {\r\n  refresh()\r\n})\r\n"]}